<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Arial; color: #1a1a1a; -webkit-text-stroke: #1a1a1a; background-color: #ffffff}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Arial; color: #1a1a1a; -webkit-text-stroke: #1a1a1a; background-color: #ffffff; min-height: 11.0px}
    span.s1 {font-kerning: none}
    span.s2 {text-decoration: underline ; font-kerning: none; color: #103cc0; -webkit-text-stroke: 0px #103cc0}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="en"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1">  &lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1">  &lt;title&gt;Decimal Detective 2.2&lt;/title&gt;</span></p>
<p class="p1"><span class="s1">  &lt;style&gt;</span></p>
<p class="p1"><span class="s1">    :root {</span></p>
<p class="p1"><span class="s1">      --bg: #1e1e2f;</span></p>
<p class="p1"><span class="s1">      --container-bg: #2a2a3f;</span></p>
<p class="p1"><span class="s1">      --text-color: #e0e0f0;</span></p>
<p class="p1"><span class="s1">      --accent: #f0d43f;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    body {</span></p>
<p class="p1"><span class="s1">      background: var(--bg);</span></p>
<p class="p1"><span class="s1">      color: var(--text-color);</span></p>
<p class="p1"><span class="s1">      font-family: Arial, sans-serif;</span></p>
<p class="p1"><span class="s1">      display: flex; align-items: center; justify-content: center;</span></p>
<p class="p1"><span class="s1">      height: 100vh; margin: 0;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    .container {</span></p>
<p class="p1"><span class="s1">      background: var(--container-bg);</span></p>
<p class="p1"><span class="s1">      padding: 20px 30px;</span></p>
<p class="p1"><span class="s1">      border-radius: 8px;</span></p>
<p class="p1"><span class="s1">      width: 360px;</span></p>
<p class="p1"><span class="s1">      text-align: center;</span></p>
<p class="p1"><span class="s1">      box-shadow: 0 0 10px rgba(0,0,0,0.7);</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    h1 { margin-top: 0; font-size: 1.6em; color: var(--accent); }</span></p>
<p class="p1"><span class="s1">    select, input[type="text"], button {</span></p>
<p class="p1"><span class="s1">      font-size: 1em;</span></p>
<p class="p1"><span class="s1">      margin: 8px 0;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    select, input[type="text"] {</span></p>
<p class="p1"><span class="s1">      width: 80%;</span></p>
<p class="p1"><span class="s1">      padding: 6px;</span></p>
<p class="p1"><span class="s1">      border: 1px solid #555;</span></p>
<p class="p1"><span class="s1">      border-radius: 4px;</span></p>
<p class="p1"><span class="s1">      text-align: center;</span></p>
<p class="p1"><span class="s1">      background: #3a3a50;</span></p>
<p class="p1"><span class="s1">      color: var(--text-color);</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    button {</span></p>
<p class="p1"><span class="s1">      background: var(--accent);</span></p>
<p class="p1"><span class="s1">      color: #2a2a3f;</span></p>
<p class="p1"><span class="s1">      border: none;</span></p>
<p class="p1"><span class="s1">      padding: 8px 16px;</span></p>
<p class="p1"><span class="s1">      border-radius: 4px;</span></p>
<p class="p1"><span class="s1">      cursor: pointer;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    button:hover { opacity: 0.85; }</span></p>
<p class="p1"><span class="s1">    .feedback { margin: 10px 0; height: 1.2em; }</span></p>
<p class="p1"><span class="s1">    .code-display span {</span></p>
<p class="p1"><span class="s1">      display: inline-block;</span></p>
<p class="p1"><span class="s1">      width: 24px;</span></p>
<p class="p1"><span class="s1">      font-weight: bold;</span></p>
<p class="p1"><span class="s1">      color: var(--accent);</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    .status-bar {</span></p>
<p class="p1"><span class="s1">      display: flex; justify-content: space-between;</span></p>
<p class="p1"><span class="s1">      font-size: 0.9em; margin-bottom: 8px;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    .hint-btn { margin-left: 4px; font-size: 0.9em; }</span></p>
<p class="p1"><span class="s1">  &lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1">  &lt;div class="container"&gt;</span></p>
<p class="p1"><span class="s1">    &lt;h1&gt;Decimal Detective 2.2&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1">    &lt;div&gt;</span></p>
<p class="p1"><span class="s1">      Theme:</span></p>
<p class="p1"><span class="s1">      &lt;select id="theme-select"&gt;</span></p>
<p class="p1"><span class="s1">        &lt;option value="detective"&gt;Detective&lt;/option&gt;</span></p>
<p class="p1"><span class="s1">        &lt;option value="space"&gt;Space&lt;/option&gt;</span></p>
<p class="p1"><span class="s1">        &lt;option value="pirate"&gt;Pirate&lt;/option&gt;</span></p>
<p class="p1"><span class="s1">      &lt;/select&gt;</span></p>
<p class="p1"><span class="s1">    &lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    &lt;div class="status-bar"&gt;</span></p>
<p class="p1"><span class="s1">      &lt;div id="stage-info"&gt;Stage 1/5&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">      &lt;div&gt;Time: &lt;span id="timer"&gt;0s&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">    &lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    &lt;div id="question"&gt;Loading question...&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">    &lt;input type="text" id="answer" placeholder="Your answer" autocomplete="off" /&gt;</span></p>
<p class="p1"><span class="s1">    &lt;button id="submit-btn"&gt;Submit&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">    &lt;button class="hint-btn" id="hint-btn"&gt;Hint&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">    &lt;div class="feedback" id="feedback"&gt;&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    &lt;div class="code-display" id="code-display"&gt;</span></p>
<p class="p1"><span class="s1">      Code: &lt;span&gt;_&lt;/span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;_&lt;/span&gt;</span></p>
<p class="p1"><span class="s1">    &lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    &lt;div style="margin-top:12px; font-size:0.85em;"&gt;</span></p>
<p class="p1"><span class="s1">      Best Time: &lt;span id="high-score"&gt;—&lt;/span&gt;</span></p>
<p class="p1"><span class="s1">    &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">  &lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;script&gt;</span></p>
<p class="p1"><span class="s1">  const THEMES = {</span></p>
<p class="p1"><span class="s1">    detective: { '--bg':'#1e1e2f','--container-bg':'#2a2a3f','--text-color':'#e0e0f0','--accent':'#f0d43f' },</span></p>
<p class="p1"><span class="s1">    space:     { '--bg':'#000014','--container-bg':'#1a1a3d','--text-color':'#c0e8ff','--accent':'#7fffd4' },</span></p>
<p class="p1"><span class="s1">    pirate:    { '--bg':'#2b1b0b','--container-bg':'#422d19','--text-color':'#f7f1e3','--accent':'#e2b007' }</span></p>
<p class="p1"><span class="s1">  };</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">  function setTheme(name) {</span></p>
<p class="p1"><span class="s1">    Object.entries(THEMES[name]).forEach(([k,v]) =&gt; {</span></p>
<p class="p1"><span class="s1">      document.documentElement.style.setProperty(k, v);</span></p>
<p class="p1"><span class="s1">    });</span></p>
<p class="p1"><span class="s1">  }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">  function randomDecimal(min, max, places = 3) {</span></p>
<p class="p1"><span class="s1">    const factor = 10 ** places;</span></p>
<p class="p1"><span class="s1">    return Math.round((Math.random() * (max - min) + min) * factor) / factor;</span></p>
<p class="p1"><span class="s1">  }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">  function simplifyFraction(n, d) {</span></p>
<p class="p1"><span class="s1">    const gcd=(a,b)=&gt;b?gcd(b,a%b):a;</span></p>
<p class="p1"><span class="s1">    const g=gcd(n,d);</span></p>
<p class="p1"><span class="s1">    return [n/g, d/g];</span></p>
<p class="p1"><span class="s1">  }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">  function makeStage() {</span></p>
<p class="p1"><span class="s1">    const types = ['add','sub','mul','div','conv','cmp','round','round3'];</span></p>
<p class="p1"><span class="s1">    const type = types[Math.floor(Math.random()*types.length)];</span></p>
<p class="p1"><span class="s1">    let q, ans, hints=[];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    if (type==='add') {</span></p>
<p class="p1"><span class="s1">      const a=randomDecimal(0,9,3), b=randomDecimal(0,9,3);</span></p>
<p class="p1"><span class="s1">      q=`${a} + ${b} =`;</span></p>
<p class="p1"><span class="s1">      ans=(Math.round((a+b)*1000)/1000).toString();</span></p>
<p class="p1"><span class="s1">      hints=['Line up decimal points.','Add rightmost digits first.'];</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    if (type==='sub') {</span></p>
<p class="p1"><span class="s1">      let a=randomDecimal(2,10,3), b=randomDecimal(0,a,3);</span></p>
<p class="p1"><span class="s1">      q=`${a} - ${b} =`;</span></p>
<p class="p1"><span class="s1">      ans=(Math.round((a-b)*1000)/1000).toString();</span></p>
<p class="p1"><span class="s1">      hints=['Align decimals and subtract.','Borrow if needed.'];</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    if (type==='mul') {</span></p>
<p class="p1"><span class="s1">      const a=randomDecimal(0,5,3), b=randomDecimal(0,5,3);</span></p>
<p class="p1"><span class="s1">      q=`${a} × ${b} =`;</span></p>
<p class="p1"><span class="s1">      ans=(Math.round((a*b)*1000)/1000).toString();</span></p>
<p class="p1"><span class="s1">      hints=['Multiply ignoring decimals first.','Count total decimal places.'];</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    if (type==='div') {</span></p>
<p class="p1"><span class="s1">      let b=randomDecimal(1,5,2), raw=randomDecimal(1,10,3);</span></p>
<p class="p1"><span class="s1">      let a=Math.round((b*raw)*1000)/1000;</span></p>
<p class="p1"><span class="s1">      q=`${a} ÷ ${b} =`;</span></p>
<p class="p1"><span class="s1">      ans=(Math.round((a/b)*1000)/1000).toString();</span></p>
<p class="p1"><span class="s1">      hints=['Make divisor whole by shifting decimal.','Do same shift to dividend.'];</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    if (type==='conv') {</span></p>
<p class="p1"><span class="s1">      const opts=[{d:0.5,n:1,dm:2},{d:0.25,n:1,dm:4},{d:0.75,n:3,dm:4},{d:0.2,n:1,dm:5},{d:0.375,n:3,dm:8}];</span></p>
<p class="p1"><span class="s1">      const p=opts[Math.floor(Math.random()*opts.length)];</span></p>
<p class="p1"><span class="s1">      q=`${p.d} as a fraction =`;</span></p>
<p class="p1"><span class="s1">      const [n,dm]=simplifyFraction(p.n,<a href="http://p.dm/"><span class="s2">p.dm</span></a>);</span></p>
<p class="p1"><span class="s1">      ans=`${n}/${dm}`;</span></p>
<p class="p1"><span class="s1">      hints=['Write over a power-of-10 denominator.','Simplify by GCD.'];</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    if (type==='cmp') {</span></p>
<p class="p1"><span class="s1">      const a=randomDecimal(0,9,3), b=randomDecimal(0,9,3);</span></p>
<p class="p1"><span class="s1">      q=`Compare: ${a} __ ${b} (use &gt;, &lt;, or =)`;</span></p>
<p class="p1"><span class="s1">      ans = a&gt;b?'&gt;':a&lt;b?'&lt;':'=';</span></p>
<p class="p1"><span class="s1">      hints=['Align decimal places.','Compare digits left to right.'];</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    if (type==='round') {</span></p>
<p class="p1"><span class="s1">      const num=randomDecimal(0,9,3);</span></p>
<p class="p1"><span class="s1">      q=`Round ${num} to the nearest tenth =`;</span></p>
<p class="p1"><span class="s1">      ans=(Math.round(num*10)/10).toFixed(1);</span></p>
<p class="p1"><span class="s1">      hints=['Look at hundredths digit.','5 or more? Round up.'];</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    if (type==='round3') {</span></p>
<p class="p1"><span class="s1">      const num=randomDecimal(0,9,4);</span></p>
<p class="p1"><span class="s1">      q=`Round ${num} to the nearest thousandth =`;</span></p>
<p class="p1"><span class="s1">      ans=(Math.round(num*1000)/1000).toFixed(3);</span></p>
<p class="p1"><span class="s1">      hints=['Look at ten-thousandths digit.','5 or more? Round up thousandths.'];</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">    const codeDigit = Math.floor(Math.random()*10).toString();</span></p>
<p class="p1"><span class="s1">    return { question:q, answer:ans, codeDigit,</span></p>
</body>
</html>
